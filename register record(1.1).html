<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026 Attendance Tracker â€” Salvation Theme</title>
<style>
:root{
  --bg0:#05070c;
  --bg1:#070a12;
  --ink:#eaf1ff;
  --shadow: 0 22px 70px rgba(0,0,0,.55);
  --emerald:#16a34a;
  --cyan:#22d3ee;
  --violet:#8b5cf6;
  --danger:#ef4444;
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;height:100%;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);background:
  radial-gradient(1200px 900px at 15% 20%, rgba(34,211,238,.22), transparent 60%),
  radial-gradient(900px 800px at 80% 25%, rgba(139,92,246,.18), transparent 55%),
  radial-gradient(1000px 900px at 65% 85%, rgba(22,163,74,.16), transparent 55%),
  linear-gradient(180deg, var(--bg0), var(--bg1));
  overflow:auto;}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 24px; background:rgba(0,0,0,.3);backdrop-filter:blur(16px);
  position:sticky;top:0;z-index:10;border-bottom:1px solid rgba(255,255,255,.14);border-radius:16px;
}
header h1{margin:0;font-size:1.5em;font-weight:900;}
header button{padding:8px 16px;font-size:1em;border:none;border-radius:10px;background:linear-gradient(135deg,var(--emerald),var(--violet));color:#fff;cursor:pointer;box-shadow:0 12px 40px rgba(0,0,0,.4);}
main{padding:16px 24px;}
form, .deleteSection{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:20px;}
form input, .deleteSection input, form select{padding:8px 10px;border-radius:8px;border:none;background:rgba(255,255,255,.08);color:#fff;}
form select{color:#000;} /* selected text color black */
form button{padding:8px 14px;border:none;border-radius:8px;background:var(--cyan);color:#000;cursor:pointer;}
.deleteSection button{padding:8px 14px;border:none;border-radius:8px;background:var(--danger);color:#fff;cursor:pointer;}
.tableWrap{overflow:auto;border-radius:14px;border:1px solid rgba(255,255,255,.14);}
table{border-collapse:collapse;width:100%;min-width:1500px;}
th,td{border:1px solid rgba(255,255,255,.14);padding:6px 8px;text-align:center;font-size:13px;white-space:nowrap;}
thead th{background:rgba(0,0,0,.4);position:sticky;top:0;z-index:5;}
.fixed{position:sticky;left:0;background:rgba(0,0,0,.7);font-weight:bold;color:#fff;z-index:7;}
.fixed2{position:sticky;left:120px;background:rgba(0,0,0,.7);font-weight:bold;color:#fff;z-index:7;}
.fixed3{position:sticky;left:260px;background:rgba(0,0,0,.7);font-weight:bold;color:#fff;z-index:7;}
.fixed4{position:sticky;left:360px;background:rgba(22,163,74,.9);font-weight:bold;color:#fff;z-index:7;}
.fixed5{position:sticky;left:440px;background:rgba(239,68,68,.85);font-weight:bold;color:#fff;z-index:7;}
tr:nth-child(even){background:rgba(255,255,255,.03);}
input[type="checkbox"]{width:18px;height:18px;cursor:pointer;}
</style>
</head>
<body>
<header>
  <h1>2026 Attendance Tracker</h1>
  <button id="saveBtn">Save</button>
</header>
<main>
  <form id="memberForm">
    <input type="text" id="first" placeholder="First Name" required>
    <input type="text" id="last" placeholder="Last Name" required>
    <select id="class">
      <option value="Y">Youth</option>
      <option value="J">Junior Soldier</option>
      <option value="S">Senior</option>
    </select>
    <button type="submit">Add Member</button>
  </form>

  <div class="deleteSection">
    <input type="text" id="deleteFirst" placeholder="First Name">
    <input type="text" id="deleteLast" placeholder="Last Name">
    <button id="deleteBtn">Delete Member</button>
  </div>

  <div class="tableWrap">
    <table id="attendanceTable">
      <thead id="thead"></thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>
</main>

<script>
// --- generate all Sundays of 2026 ---
function getAllSundays(year) {
  const sundays = [];
  let d = new Date(year,0,1);
  while(d.getDay()!==0) d.setDate(d.getDate()+1);
  while(d.getFullYear()===year){
    sundays.push(new Date(d));
    d.setDate(d.getDate()+7);
  }
  return sundays;
}
const SUNDAYS = getAllSundays(2026);
const STORAGE_KEY = 'attendance_2026';
let members = JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');

const thead = document.getElementById('thead');
const tbody = document.getElementById('tbody');
const form = document.getElementById('memberForm');
const firstInput = document.getElementById('first');
const lastInput = document.getElementById('last');
const classInput = document.getElementById('class');
const deleteFirst = document.getElementById('deleteFirst');
const deleteLast = document.getElementById('deleteLast');
const deleteBtn = document.getElementById('deleteBtn');

// --- render table header ---
function renderHeader(){
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <th class="fixed">First Name</th>
    <th class="fixed2">Last Name</th>
    <th class="fixed3">Class</th>
    <th class="fixed4">Present</th>
    <th class="fixed5">Absent</th>
    ` + SUNDAYS.map(d=>`<th>${d.toLocaleDateString('en-GB',{day:'2-digit',month:'2-digit'})}</th>`).join('');
  thead.innerHTML=''; thead.appendChild(tr);
}

// --- render table body ---
function renderBody(){
  tbody.innerHTML='';
  members.forEach(m=>{
    const tr = document.createElement('tr');
    const presentCount = m.attendance.filter(v=>v).length;
    const absentCount = m.attendance.filter(v=>!v).length;
    tr.innerHTML = `
      <td class="fixed">${m.first}</td>
      <td class="fixed2">${m.last}</td>
      <td class="fixed3">${m.class}</td>
      <td class="fixed4">${presentCount}</td>
      <td class="fixed5">${absentCount}</td>
      ` + m.attendance.map((att,i)=>`<td><input type="checkbox" data-member="${m.id}" data-date="${i}" ${att?'checked':''}></td>`).join('');
    tbody.appendChild(tr);
  });
}

// --- add member ---
form.addEventListener('submit', e=>{
  e.preventDefault();
  const f = firstInput.value.trim();
  const l = lastInput.value.trim();
  const c = classInput.value;
  if(!f||!l){alert('Enter first and last name'); return;}
  const id = Date.now().toString(36);
  members.unshift({id,first:f,last:l,class:c,attendance: Array(SUNDAYS.length).fill(false)});
  firstInput.value=''; lastInput.value=''; classInput.value='Y';
  renderBody(); save();
});

// --- handle checkbox changes ---
tbody.addEventListener('change', e=>{
  if(e.target.tagName==='INPUT' && e.target.type==='checkbox'){
    const memberId = e.target.dataset.member;
    const idx = parseInt(e.target.dataset.date);
    const member = members.find(m=>m.id===memberId);
    if(member){ member.attendance[idx]=e.target.checked; renderBody(); }
  }
});

// --- delete members by full name ---
deleteBtn.addEventListener('click', ()=>{
  const f = deleteFirst.value.trim().toLowerCase();
  const l = deleteLast.value.trim().toLowerCase();
  if(!f || !l){alert('Enter both first and last name to delete'); return;}
  members = members.filter(m=> !(m.first.toLowerCase()===f && m.last.toLowerCase()===l) );
  deleteFirst.value=''; deleteLast.value='';
  renderBody(); save();
});

// --- save to localStorage ---
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(members)); }
document.getElementById('saveBtn').addEventListener('click', save);

// --- initial render ---
renderHeader();
renderBody();
</script>
</body>
</html>
